unit tela_login;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.ExtCtrls, Vcl.StdCtrls,
  Vcl.Imaging.pngimage, Vcl.Buttons;

type
  Tform_login = class(TForm)
    pnl_title_login: TPanel;
    lbl_usuario: TLabel;
    edt_usuario: TEdit;
    Label2: TLabel;
    edt_senha: TEdit;
    Image2: TImage;
    Bt_Esqueci_Minha_senha: TButton;
    btn_entrar: TButton;
    procedure btn_entrarClick(Sender: TObject);
    procedure BitBtn1Click(Sender: TObject);
    procedure Bt_Esqueci_Minha_senhaClick(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  form_login: Tform_login;

implementation

{$R *.dfm}

uses DataModule, tela_principal;

procedure Tform_login.BitBtn1Click(Sender: TObject);
var
nome, resultado: string;
begin
DM.ADOConnection1.Close;
DM.ADOQuery1.SQL.Text := 'SELECT * FROM usuarios';
DM.ADOQuery1.Open;
nome := DM.ADOQuery1.FieldValues['username'];

ShowMessage(nome);

end;

procedure Tform_login.btn_entrarClick(Sender: TObject);
var
usuario, senha: string;
begin

//*Variavel Usuário  e Senha
usuario := edt_usuario.Text;
senha := edt_senha.Text;

DM.ADOQuery1.Close;
DM.ADOQuery1.SQL.Text := 'SELECT * FROM usuarios WHERE username = :paramusuario and senha = :paramsenha ';
DM.ADOQuery1.Parameters.ParamByName('paramusuario').Value := usuario;
DM.ADOQuery1.Parameters.ParamByName('paramsenha').Value := senha;
DM.ADOQuery1.Open;
  if DM.ADOQuery1.RecordCount > 0 then
  begin
    form_principal.Show;
    form_login.Visible := False;
  end
else
begin
  ShowMessage('Login ou Senha Errada!');
  edt_usuario.SetFocus;
end;
end;

procedure Tform_login.Bt_Esqueci_Minha_senhaClick(Sender: TObject);
begin
form_principal.Show;
form_login.Visible := False;
end;

end.
